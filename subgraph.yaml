specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: factory
    network: base-testnet
    source:
      address: "0x96356d414a925FC98bEe2e1954bab6971FF99825"
      abi: factory
      startBlock: 9141195
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AdminChanged
        - BeaconUpgraded
        - Upgraded
      abis:
        - name: factory
          file: ./abis/factory.json
      eventHandlers:
        - event: CreateVault(indexed uint256,address[],address,uint256,string,address)
          handler: handleCreateVault
        - event: UpdatedAcceptedToken(address)
          handler: handleUpdatedAcceptedToken
        - event: UpdatedFee(uint64,uint64)
          handler: handleUpdatedFee
        - event: UpdatedTierData((uint256,uint64)[])
          handler: handleUpdatedTierData
        - event: Upgraded(indexed address)
          handler: handleUpgraded
      file: ./src/factory.ts
  - kind: ethereum
    name: treasury
    network: base-testnet
    source:
      address: "0x7BBC140F4C46baE7358d7283dd778c716E4eA1b5"
      abi: treasury
      startBlock: 9141082
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - treasuryAdminChanged
        - treasuryBeaconUpgraded
        - FundWithdrawn
        - Initialized
        - RoleAdminChanged
        - RoleGranted
        - RoleRevoked
        - treasuryUpgraded
      abis:
        - name: treasury
          file: ./abis/treasury.json
      eventHandlers:
        - event: FundWithdrawn(address,address,uint256)
          handler: handleFundWithdrawn
      file: ./src/treasury.ts
  - name: SiloToken
    kind: ethereum/contract
    network: base-testnet
    source:
      abi: ERC20
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/SiloToken.ts
      entities:
        - Vault
      abis:
        - name: vault
          file: ./abis/vault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
